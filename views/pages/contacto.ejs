<%- include('../layout/header') %>

<!-- ===== HEADER DE P√ÅGINA ===== -->
<section class="page-header">
    <div class="container">
        <h1>Reporte Ciudadano</h1>
        <p class="frase-destacada">‚ö° Reporta problemas en tu colonia ‚ö°</p>
    </div>
</section>

<!-- ===== CONTENEDOR PRINCIPAL ===== -->
<section class="contacto-page">

    <!-- ===== LAYOUT DE DOS COLUMNAS ===== -->
    <div class="contacto-layout">
        
        <!-- ===== COLUMNA IZQUIERDA - TARJETAS VERTICALES ===== -->
        <aside class="contacto-sidebar">
            <h2 class="sidebar-title">Contacto</h2>
            
            <!-- Tel√©fono -->
            <div class="contacto-card-vertical">
                <div class="contacto-icono-vertical">
                    <i class="fas fa-phone-alt"></i>
                </div>
                <div class="contacto-info-vertical">
                    <h3>Tel√©fono</h3>
                    <p class="contacto-dato">(923) 123-4567</p>
                    <p class="contacto-ext">Conmutador</p>
                    <a href="tel:9231234567" class="btn-contacto-vertical">Llamar ahora</a>
                </div>
            </div>

            <!-- Correo -->
            <div class="contacto-card-vertical">
                <div class="contacto-icono-vertical">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="contacto-info-vertical">
                    <h3>Correo Electr√≥nico</h3>
                    <p class="contacto-dato">contacto@laschoapas.gob.mx</p>
                    <p class="contacto-ext">Respuesta en 24-48 hrs</p>
                    <a href="mailto:contacto@laschoapas.gob.mx" class="btn-contacto-vertical">Enviar correo</a>
                </div>
            </div>

            <!-- Ubicaci√≥n -->
            <div class="contacto-card-vertical">
                <div class="contacto-icono-vertical">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="contacto-info-vertical">
                    <h3>Ubicaci√≥n</h3>
                    <p class="contacto-dato">Av. Independencia #123</p>
                    <p class="contacto-ext">Zona Centro, Las Choapas, Ver.</p>
                    <a href="https://maps.google.com/?q=Las+Choapas+Veracruz" target="_blank" class="btn-contacto-vertical">Ver mapa</a>
                </div>
            </div>

            <!-- Horario -->
            <div class="contacto-card-vertical destacado">
                <div class="contacto-icono-vertical">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="contacto-info-vertical">
                    <h3>Horario de Atenci√≥n</h3>
                    <p class="contacto-dato">Lun - Vie: 9:00 - 17:00</p>
                    <p class="contacto-ext">S√°bados: 9:00 - 13:00</p>
                    <a href="#reporteForm" class="btn-contacto-vertical">Ir a reportes</a>
                </div>
            </div>
        </aside>

        <!-- ===== COLUMNA DERECHA - FORMULARIO ===== -->
        <main class="contacto-main">
            <!-- ===== FORMULARIO DE REPORTES CIUDADANOS (TU C√ìDIGO EXACTO) ===== -->
            <section class="reporte-principal-section" id="reporteFormSection">
                <div class="container">
                    <div class="reporte-principal-container">
                        <!-- INFO SUPERIOR -->
                        <div class="reporte-info-header">
                            <i class="fas fa-bullhorn"></i>
                            <h2>Reporte Ciudadano</h2>
                            <p>Reporta problemas en la v√≠a p√∫blica para una atenci√≥n m√°s r√°pida</p>
                            <div class="info-badge-container">
                                <span class="info-badge"><i class="fas fa-clock"></i> Respuesta: 24-72 horas</span>
                                <span class="info-badge"><i class="fas fa-map-marker-alt"></i> Ubicaci√≥n obligatoria</span>
                            </div>
                        </div>

                        <!-- FORMULARIO PRINCIPAL (TU C√ìDIGO EXACTO) -->
                       <form id="reporteForm" class="reporte-form">
    <!-- TIPO DE REPORTE (selector visual) -->
    <div class="tipo-reporte-grid">
        <div class="tipo-card" data-tipo="bache">
            <i class="fas fa-road"></i>
            <span>Bache</span>
        </div>
        <div class="tipo-card" data-tipo="alumbrado">
            <i class="fas fa-lightbulb"></i>
            <span>Alumbrado</span>
        </div>
        <div class="tipo-card" data-tipo="basura">
            <i class="fas fa-trash"></i>
            <span>Basura</span>
        </div>
        <div class="tipo-card" data-tipo="fuga">
            <i class="fas fa-water"></i>
            <span>Fuga de agua</span>
        </div>
        <div class="tipo-card" data-tipo="drenaje">
            <i class="fas fa-poop"></i>
            <span>Drenaje</span>
        </div>
        <div class="tipo-card" data-tipo="vialidad">
            <i class="fas fa-traffic-light"></i>
            <span>Se√±alamiento</span>
        </div>
    </div>
    <input type="hidden" name="tipo" id="tipoSeleccionado" required>

    <!-- üî¥ SELECT OCULTO PARA EL JS -->
    <select id="tipoReporte" style="display: none;">
        <option value="bache">Bache</option>
        <option value="alumbrado">Alumbrado</option>
        <option value="basura">Basura</option>
        <option value="fuga">Fuga de agua</option>
        <option value="drenaje">Drenaje</option>
        <option value="vialidad">Se√±alamiento</option>
    </select>

    <!-- UBICACI√ìN -->
    <div class="form-section">
        <h3><i class="fas fa-map-pin"></i> Ubicaci√≥n del problema</h3>
        
        <div class="ubicacion-principal">
            <div class="ubicacion-input-group">
                <input type="text" id="direccion" name="direccion" 
                       placeholder="Ej. Av. Independencia #123, Centro" required>
                <button type="button" class="btn-ubicacion" onclick="obtenerUbicacion()">
                    <i class="fas fa-location-dot"></i> Usar mi ubicaci√≥n
                </button>
            </div>
            
            <input type="hidden" id="latitud" name="latitud">
            <input type="hidden" id="longitud" name="longitud">
            
            <div class="ubicacion-detalles">
                <input type="text" name="colonia" placeholder="Colonia (opcional)">
                <input type="text" name="entre_calles" placeholder="Entre calles (opcional)">
            </div>
            
            <div id="mapa-preview" class="mapa-preview" style="display: none;"></div>
        </div>
    </div>

    <!-- FOTOS -->
    <div class="form-section">
        <h3><i class="fas fa-camera"></i> Fotos del problema</h3>
        
        <div class="foto-upload-area" onclick="document.getElementById('fotos').click()">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Haz clic para subir fotos</p>
            <small>M√°ximo 5 fotos - Formatos: JPG, PNG</small>
        </div>
        <input type="file" id="fotos" name="fotos" accept="image/*" multiple style="display: none;">
        
        <div id="vista-previa-fotos" class="fotos-preview"></div>
    </div>

    <!-- DESCRIPCI√ìN -->
    <div class="form-section">
        <h3><i class="fas fa-pencil-alt"></i> Descripci√≥n del problema</h3>
        
        <textarea name="descripcion" rows="5" 
                  placeholder="Describe el problema con el mayor detalle posible. Ej: El bache mide aproximadamente 50cm de di√°metro y est√° en medio de la calle..." 
                  required></textarea>
    </div>

    <!-- DATOS DE CONTACTO -->
    <div class="form-section">
        <h3><i class="fas fa-address-card"></i> Tus datos (opcional)</h3>
        <p class="section-note">Si proporcionas tus datos, podemos notificarte cuando se resuelva el reporte.</p>
        
        <div class="datos-grid">
            <input type="text" name="nombre" placeholder="Nombre completo">
            <input type="email" name="email" placeholder="Correo electr√≥nico">
            <input type="tel" name="telefono" placeholder="Tel√©fono">
        </div>
    </div>

    <!-- PRIVACIDAD Y ENV√çO -->
    <div class="form-footer">
        <label class="checkbox-label">
            <input type="checkbox" name="privacidad" required>
            <span>Acepto el <a href="/aviso-privacidad" target="_blank">Aviso de Privacidad</a> y confirmo que la informaci√≥n proporcionada es ver√≠dica.</span>
        </label>
        
        <button type="submit" class="btn-enviar">
            <span>Enviar reporte</span>
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</form>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ===== POPUP DE √âXITO ===== -->
    <div id="popupExito" class="popup-modal" style="display: none;">
        <div class="popup-contenido">
            <div class="popup-header">
                <i class="fas fa-check-circle popup-icono"></i>
            </div>
            <h2 class="popup-titulo">¬°Reporte enviado con √©xito!</h2>
            <p class="popup-texto">Tu folio de seguimiento es:</p>
            <div class="popup-folio" id="folioGenerado">REP-2024-02-0001</div>
            <div class="popup-info">
                <p><i class="fas fa-clock"></i> Tiempo estimado: <strong>24-72 horas</strong></p>
            </div>
        </div>
    </div>

    <!-- ===== MAPA ===== -->
    <section class="mapa-section">
        <div class="container">
            <div class="map-responsive">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d472.7076165464051!2d-94.09069137070433!3d17.909239931211083!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ebdddfe1489f1b%3A0x79a84625680eb898!2sPalacio%20Municipal!5e1!3m2!1ses!2smx!4v1772135822701!5m2!1ses!2smx" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </div>
    </section>

</section>

<!-- Scripts -->
<script src="/js/main.js"></script>
<script src="/js/contacto.js"></script>
<%- include('../layout/footer') %>